# æ•°æ®æµå‘å›¾è§£

æœ¬æ–‡æ¡£ç”¨å¯è§†åŒ–æ–¹å¼å±•ç¤ºé¡¹ç›®çš„æ•°æ®æµå‘ï¼Œå¸®åŠ©ç†è§£æœ¬åœ°è°ƒç”¨å¦‚ä½•ä½¿ç”¨ Supabase æ•°æ®ã€‚

---

## ğŸ“Š æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·ç•Œé¢å±‚                                â”‚
â”‚                    (React Components)                           â”‚
â”‚                                                                 â”‚
â”‚  DeviceList.tsx  â”‚  DeviceDetail.tsx  â”‚  Inventory.tsx  â”‚ ...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ è°ƒç”¨æ•°æ®æ¥å£
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ•°æ®å±‚                                   â”‚
â”‚                    (src/data/*.ts)                              â”‚
â”‚                                                                 â”‚
â”‚  devices.ts  â”‚  inventory.ts  â”‚  å…¶ä»–æ•°æ®æ¨¡å—                    â”‚
â”‚                                                                 â”‚
â”‚  â€¢ getDevices()      â€¢ getInventory()                          â”‚
â”‚  â€¢ updateDevice()    â€¢ updateInventory()                       â”‚
â”‚  â€¢ getDevice()       â€¢ checkStockLevel()                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ æ£€æŸ¥é…ç½®
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é…ç½®æ£€æŸ¥å±‚                                  â”‚
â”‚                  (src/lib/supabase.ts)                          â”‚
â”‚                                                                 â”‚
â”‚              isSupabaseConfigured ?                             â”‚
â”‚                     â†™        â†˜                                  â”‚
â”‚                 æ˜¯ âœ…         å¦ âŒ                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚              â”‚
      ä½¿ç”¨ Supabase â”‚              â”‚ ä½¿ç”¨æœ¬åœ°æ•°æ®
                  â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æœåŠ¡å±‚             â”‚  â”‚   æœ¬åœ°ç¼“å­˜            â”‚
â”‚ (src/services/*.ts)  â”‚  â”‚ (å†…å­˜ä¸­çš„æ•°æ®)         â”‚
â”‚                      â”‚  â”‚                      â”‚
â”‚ â€¢ deviceService.ts   â”‚  â”‚ â€¢ devicesData[]      â”‚
â”‚ â€¢ inventoryService.tsâ”‚  â”‚ â€¢ inventoryData{}    â”‚
â”‚ â€¢ outboundService.ts â”‚  â”‚ â€¢ localRecords[]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Supabase å®¢æˆ·ç«¯è°ƒç”¨
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Supabase å®¢æˆ·ç«¯                             â”‚
â”‚                 (src/lib/supabase.ts)                         â”‚
â”‚                                                               â”‚
â”‚  const supabase = createClient(url, key)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ HTTP/WebSocket
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Supabase äº‘æ•°æ®åº“                           â”‚
â”‚          (https://sbp-a2e2xuudcasoe44t.supabase.co)          â”‚
â”‚                                                               â”‚
â”‚  â€¢ devices è¡¨                                                 â”‚
â”‚  â€¢ maintenance_logs è¡¨                                        â”‚
â”‚  â€¢ issues è¡¨                                                  â”‚
â”‚  â€¢ inventory è¡¨                                               â”‚
â”‚  â€¢ outbound_records è¡¨                                        â”‚
â”‚  â€¢ audit_logs è¡¨                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ æ•°æ®è¯»å–æµç¨‹ï¼ˆä»¥è®¾å¤‡åˆ—è¡¨ä¸ºä¾‹ï¼‰

### åœºæ™¯ï¼šç”¨æˆ·è®¿é—®è®¾å¤‡åˆ—è¡¨é¡µé¢

```
1ï¸âƒ£ ç”¨æˆ·æ“ä½œ
   ç”¨æˆ·æ‰“å¼€è®¾å¤‡åˆ—è¡¨é¡µé¢
   â†“

2ï¸âƒ£ ç»„ä»¶æ¸²æŸ“
   DeviceList.tsx ç»„ä»¶åŠ è½½
   useEffect(() => {
     loadDevices();
   }, []);
   â†“

3ï¸âƒ£ è°ƒç”¨æ•°æ®å±‚
   const devices = await getDevices();
   â†“
   ğŸ“„ æ–‡ä»¶: src/data/devices.ts
   â†“

4ï¸âƒ£ é…ç½®æ£€æŸ¥
   if (checkSupabaseConfig()) {  // â† æ£€æŸ¥æ˜¯å¦é…ç½®äº† Supabase
     âœ… å·²é…ç½® â†’ ç»§ç»­ç¬¬ 5 æ­¥
     âŒ æœªé…ç½® â†’ è·³åˆ°ç¬¬ 8 æ­¥
   }
   â†“

5ï¸âƒ£ è°ƒç”¨æœåŠ¡å±‚
   const devices = await fetchDevices();
   â†“
   ğŸ“„ æ–‡ä»¶: src/services/deviceService.ts
   â†“

6ï¸âƒ£ Supabase æŸ¥è¯¢
   const { data: devices, error } = await supabase
     .from('devices')           // â† æŸ¥è¯¢ devices è¡¨
     .select('*')               // â† é€‰æ‹©æ‰€æœ‰å­—æ®µ
     .order('name');            // â† æŒ‰åç§°æ’åº
   â†“

7ï¸âƒ£ å…³è”æ•°æ®æŸ¥è¯¢
   // åŒæ—¶æŸ¥è¯¢ç»´æŠ¤æ—¥å¿—
   const { data: logs } = await supabase
     .from('maintenance_logs')
     .select('*')
     .order('date', { ascending: false });
   
   // åŒæ—¶æŸ¥è¯¢æ•…éšœè®°å½•
   const { data: issues } = await supabase
     .from('issues')
     .select('*')
     .order('date', { ascending: false });
   â†“

8ï¸âƒ£ æ•°æ®æ˜ å°„å’Œç»„åˆ
   return devices.map(device => {
     const deviceLogs = logs?.filter(log => log.device_id === device.id);
     const deviceIssues = issues?.filter(issue => issue.device_id === device.id);
     return mapRowToDevice(device, deviceLogs, deviceIssues);
   });
   â†“

9ï¸âƒ£ æ›´æ–°ç¼“å­˜
   devicesData = devices;  // â† æ›´æ–°æœ¬åœ°ç¼“å­˜
   â†“

ğŸ”Ÿ è¿”å›æ•°æ®
   return devices;  // â† è¿”å› Supabase æ•°æ®
   â†“

1ï¸âƒ£1ï¸âƒ£ ç»„ä»¶æ›´æ–°
   setDevices(devices);
   â†“

1ï¸âƒ£2ï¸âƒ£ ç•Œé¢æ¸²æŸ“
   æ˜¾ç¤ºè®¾å¤‡åˆ—è¡¨
```

### é™çº§åœºæ™¯ï¼šSupabase æœªé…ç½®

```
4ï¸âƒ£ é…ç½®æ£€æŸ¥
   if (checkSupabaseConfig()) {
     âŒ æœªé…ç½® â†’ æ‰§è¡Œé™çº§é€»è¾‘
   }
   â†“

8ï¸âƒ£ ä½¿ç”¨æœ¬åœ°æ•°æ®
   return [...devicesData];  // â† è¿”å›å†…å­˜ä¸­çš„ç¤ºä¾‹æ•°æ®
   â†“

9ï¸âƒ£ ç»„ä»¶æ›´æ–°
   setDevices(devices);  // â† ä½¿ç”¨æœ¬åœ°æ•°æ®
   â†“

ğŸ”Ÿ ç•Œé¢æ¸²æŸ“
   æ˜¾ç¤ºè®¾å¤‡åˆ—è¡¨ï¼ˆæœ¬åœ°æ•°æ®ï¼‰
   âš ï¸ æ§åˆ¶å°æç¤º: "Supabase æœªé…ç½®ï¼šæ­£åœ¨ä½¿ç”¨æœ¬åœ°æ¨¡æ‹Ÿæ•°æ®æ¨¡å¼"
```

---

## âœï¸ æ•°æ®å†™å…¥æµç¨‹ï¼ˆä»¥æ›´æ–°è®¾å¤‡ä¸ºä¾‹ï¼‰

### åœºæ™¯ï¼šç”¨æˆ·ä¿®æ”¹è®¾å¤‡ä¿¡æ¯

```
1ï¸âƒ£ ç”¨æˆ·æ“ä½œ
   ç”¨æˆ·åœ¨è®¾å¤‡è¯¦æƒ…é¡µä¿®æ”¹è®¾å¤‡ä¿¡æ¯
   ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
   â†“

2ï¸âƒ£ ç»„ä»¶å¤„ç†
   const handleSave = async () => {
     const success = await updateDevice(deviceId, updates);
     if (success) {
       toast.success('ä¿å­˜æˆåŠŸ');
     }
   };
   â†“

3ï¸âƒ£ è°ƒç”¨æ•°æ®å±‚
   await updateDevice(deviceId, updates);
   â†“
   ğŸ“„ æ–‡ä»¶: src/data/devices.ts
   â†“

4ï¸âƒ£ é…ç½®æ£€æŸ¥
   if (checkSupabaseConfig()) {
     âœ… å·²é…ç½® â†’ ç»§ç»­ç¬¬ 5 æ­¥
     âŒ æœªé…ç½® â†’ è·³åˆ°ç¬¬ 9 æ­¥ï¼ˆæœ¬åœ°æ›´æ–°ï¼‰
   }
   â†“

5ï¸âƒ£ è°ƒç”¨æœåŠ¡å±‚
   const success = await updateDeviceData(deviceId, updates);
   â†“
   ğŸ“„ æ–‡ä»¶: src/services/deviceService.ts
   â†“

6ï¸âƒ£ æ•°æ®è½¬æ¢
   const row = mapDeviceToRow(updates);
   // å°†å‰ç«¯æ ¼å¼è½¬æ¢ä¸ºæ•°æ®åº“æ ¼å¼
   // ä¾‹å¦‚: printerModel â†’ printer_model_field
   â†“

7ï¸âƒ£ Supabase æ›´æ–°
   const { error } = await supabase
     .from('devices')           // â† æ›´æ–° devices è¡¨
     .update(row)               // â† æ›´æ–°æ•°æ®
     .eq('id', deviceId);       // â† æ¡ä»¶ï¼šè®¾å¤‡ ID
   â†“

8ï¸âƒ£ è¿”å›ç»“æœ
   if (error) {
     console.error('æ›´æ–°å¤±è´¥:', error);
     return false;
   }
   return true;  // â† æ›´æ–°æˆåŠŸ
   â†“

9ï¸âƒ£ æ›´æ–°æœ¬åœ°ç¼“å­˜
   const deviceIndex = devicesData.findIndex(d => d.id === deviceId);
   devicesData[deviceIndex] = {
     ...devicesData[deviceIndex],
     ...updates
   };
   â†“

ğŸ”Ÿ ç»„ä»¶åé¦ˆ
   toast.success('ä¿å­˜æˆåŠŸ');
   // åˆ·æ–°é¡µé¢æ•°æ®ä¿æŒï¼ˆå› ä¸ºå·²å†™å…¥ Supabaseï¼‰
```

---

## ğŸ”„ å‡ºåº“æµç¨‹ï¼ˆå¤æ‚äº‹åŠ¡ç¤ºä¾‹ï¼‰

### åœºæ™¯ï¼šç”¨æˆ·åˆ›å»ºå‡ºåº“è®°å½•

```
1ï¸âƒ£ ç”¨æˆ·å¡«å†™å‡ºåº“è¡¨å•
   â€¢ é€‰æ‹©è®¾å¤‡
   â€¢ å¡«å†™ç›®çš„åœ°
   â€¢ é€‰æ‹©å‡ºåº“ç‰©èµ„
   â€¢ å¡«å†™æ•°é‡
   â†“

2ï¸âƒ£ æäº¤å‡ºåº“è¯·æ±‚
   const result = await createOutboundRecord({
     deviceId: 'dev-01',
     deviceName: 'é­”é•œ1å·',
     destination: 'ä¸Šæµ·å±•å…',
     operator: 'å¼ ä¸‰',
     items: {
       printerModel: 'EPSON-L8058',
       paperType: 'A4',
       paperQuantity: 100,
       inkC: 2,
       routers: 1
     }
   });
   â†“

3ï¸âƒ£ æœåŠ¡å±‚å¤„ç†
   ğŸ“„ æ–‡ä»¶: src/services/outboundService.ts
   â†“

4ï¸âƒ£ æ­¥éª¤ 1: è·å–è®¾å¤‡ä¿¡æ¯
   const device = await getDevice(deviceId);
   // è®°å½•åŸå§‹ä½ç½®å’Œè´Ÿè´£äººï¼ˆç”¨äºå½’è¿˜æ—¶æ¢å¤ï¼‰
   const originalLocation = device.location;  // "æ­å·å±•å…AåŒº"
   const originalOwner = device.owner;        // "æå››"
   â†“

5ï¸âƒ£ æ­¥éª¤ 2: æ£€æŸ¥åº“å­˜
   const stockCheck = await checkStock(items);
   if (!stockCheck.sufficient) {
     return { success: false, error: 'åº“å­˜ä¸è¶³' };
   }
   â†“

6ï¸âƒ£ æ­¥éª¤ 3: åˆ›å»ºå‡ºåº“è®°å½•
   if (isSupabaseConfigured) {
     const { data, error } = await supabase
       .from('outbound_records')
       .insert({
         device_id: 'dev-01',
         device_name: 'é­”é•œ1å·',
         destination: 'ä¸Šæµ·å±•å…',
         operator: 'å¼ ä¸‰',
         items: {...},
         status: 'outbound',
         original_location: 'æ­å·å±•å…AåŒº',  // â† è®°å½•åŸå§‹ä½ç½®
         original_owner: 'æå››'              // â† è®°å½•åŸè´Ÿè´£äºº
       })
       .select()
       .single();
   }
   â†“

7ï¸âƒ£ æ­¥éª¤ 4: åˆ›å»ºå®¡è®¡æ—¥å¿—
   await supabase.from('audit_logs').insert({
     action_type: 'å‡ºåº“',
     entity_type: 'outbound_record',
     entity_id: data.id,
     operator: 'å¼ ä¸‰',
     details: {
       deviceId: 'dev-01',
       destination: 'ä¸Šæµ·å±•å…',
       items: {...}
     }
   });
   â†“

8ï¸âƒ£ æ­¥éª¤ 5: æ›´æ–°è®¾å¤‡ä½ç½®å’Œè´Ÿè´£äºº
   await updateDevice('dev-01', {
     location: 'ä¸Šæµ·å±•å…',     // â† æ›´æ–°ä½ç½®
     owner: 'å¼ ä¸‰'             // â† æ›´æ–°è´Ÿè´£äºº
   });
   
   // è¿™ä¼šè§¦å‘å¦ä¸€ä¸ª Supabase æ›´æ–°ï¼š
   await supabase
     .from('devices')
     .update({
       location: 'ä¸Šæµ·å±•å…',
       owner: 'å¼ ä¸‰',
       updated_at: new Date().toISOString()
     })
     .eq('id', 'dev-01');
   â†“

9ï¸âƒ£ æ­¥éª¤ 6: æ›´æ–°åº“å­˜
   await updateInventoryStock(items, 'decrement');
   
   // è¿™ä¼šæ›´æ–°åº“å­˜è¡¨ï¼š
   await supabase
     .from('inventory')
     .update({
       paper_stock: {
         'EPSON-L8058': {
           'A4': 450 - 100  // â† æ‰£å‡ 100 å¼ 
         }
       },
       epson_ink_stock: {
         C: 8 - 2  // â† æ‰£å‡ 2 ç“¶
       },
       equipment_stock: {
         routers: 15 - 1  // â† æ‰£å‡ 1 ä¸ª
       }
     })
     .eq('id', inventoryId);
   â†“

ğŸ”Ÿ è¿”å›æˆåŠŸ
   return { success: true };
   â†“

1ï¸âƒ£1ï¸âƒ£ ç•Œé¢åé¦ˆ
   toast.success('å‡ºåº“æˆåŠŸ');
   
   // æ•°æ®å˜åŒ–æ±‡æ€»ï¼š
   âœ… outbound_records è¡¨ï¼šæ–°å¢ 1 æ¡è®°å½•
   âœ… audit_logs è¡¨ï¼šæ–°å¢ 1 æ¡å®¡è®¡æ—¥å¿—
   âœ… devices è¡¨ï¼šæ›´æ–°è®¾å¤‡ä½ç½®å’Œè´Ÿè´£äºº
   âœ… inventory è¡¨ï¼šæ‰£å‡åº“å­˜æ•°é‡
```

---

## ğŸ” æ•°æ®åŒæ­¥éªŒè¯

### å¦‚ä½•éªŒè¯æœ¬åœ°è°ƒç”¨ä½¿ç”¨ Supabase æ•°æ®ï¼Ÿ

#### æ–¹æ³• 1: æ§åˆ¶å°æ—¥å¿—éªŒè¯

```javascript
// src/data/devices.ts
export const getDevices = async (): Promise<Device[]> => {
  if (checkSupabaseConfig()) {
    console.log('ğŸ”µ æ­£åœ¨ä» Supabase è·å–è®¾å¤‡æ•°æ®...');
    const devices = await fetchDevices();
    if (devices.length > 0) {
      console.log('âœ… æˆåŠŸä» Supabase è·å–', devices.length, 'å°è®¾å¤‡');
      devicesData = devices;
      return devices;
    }
  }
  
  console.log('âš ï¸ ä½¿ç”¨æœ¬åœ°æ¨¡æ‹Ÿæ•°æ®');
  return [...devicesData];
};
```

**é¢„æœŸè¾“å‡ºï¼ˆå·²é…ç½®ï¼‰ï¼š**
```
ğŸ”µ æ­£åœ¨ä» Supabase è·å–è®¾å¤‡æ•°æ®...
âœ… æˆåŠŸä» Supabase è·å– 10 å°è®¾å¤‡
```

**é¢„æœŸè¾“å‡ºï¼ˆæœªé…ç½®ï¼‰ï¼š**
```
âš ï¸ Supabase æœªé…ç½®ï¼šæ­£åœ¨ä½¿ç”¨æœ¬åœ°æ¨¡æ‹Ÿæ•°æ®æ¨¡å¼
âš ï¸ ä½¿ç”¨æœ¬åœ°æ¨¡æ‹Ÿæ•°æ®
```

#### æ–¹æ³• 2: æ•°æ®ä¿®æ”¹éªŒè¯

**æ­¥éª¤ï¼š**
1. åœ¨æœ¬åœ°ä¿®æ”¹è®¾å¤‡ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼šä¿®æ”¹è®¾å¤‡åç§°ï¼‰
2. åˆ·æ–°é¡µé¢
3. è§‚å¯Ÿæ•°æ®æ˜¯å¦ä¿æŒ

**ç»“æœåˆ¤æ–­ï¼š**
- âœ… **æ•°æ®ä¿æŒ** â†’ ä½¿ç”¨ Supabaseï¼ˆæ•°æ®å·²æŒä¹…åŒ–ï¼‰
- âŒ **æ•°æ®ä¸¢å¤±** â†’ ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼ˆåˆ·æ–°åé‡ç½®ï¼‰

#### æ–¹æ³• 3: Supabase æ§åˆ¶å°éªŒè¯

**æ­¥éª¤ï¼š**
1. è®¿é—® Supabase æ§åˆ¶å°ï¼šhttps://supabase.opentrust.net
2. è¿›å…¥é¡¹ç›®ï¼šsbp-a2e2xuudcasoe44t
3. æ‰“å¼€ Table Editor
4. æŸ¥çœ‹ `devices` è¡¨
5. åœ¨æœ¬åœ°ä¿®æ”¹è®¾å¤‡ä¿¡æ¯
6. åˆ·æ–° Supabase æ§åˆ¶å°
7. è§‚å¯Ÿæ•°æ®æ˜¯å¦å˜åŒ–

**ç»“æœåˆ¤æ–­ï¼š**
- âœ… **æ•°æ®å˜åŒ–** â†’ æœ¬åœ°è°ƒç”¨ä½¿ç”¨ Supabase
- âŒ **æ•°æ®ä¸å˜** â†’ æœ¬åœ°è°ƒç”¨ä½¿ç”¨å†…å­˜æ•°æ®

#### æ–¹æ³• 4: ç½‘ç»œè¯·æ±‚éªŒè¯

**æ­¥éª¤ï¼š**
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° Network æ ‡ç­¾
3. åˆ·æ–°é¡µé¢
4. æŸ¥æ‰¾è¯·æ±‚åˆ° `supabase.co` çš„ API è°ƒç”¨

**é¢„æœŸè¯·æ±‚ï¼š**
```
GET https://sbp-a2e2xuudcasoe44t.supabase.opentrust.net/rest/v1/devices
POST https://sbp-a2e2xuudcasoe44t.supabase.opentrust.net/rest/v1/devices
```

**ç»“æœåˆ¤æ–­ï¼š**
- âœ… **æœ‰è¯·æ±‚** â†’ ä½¿ç”¨ Supabase
- âŒ **æ— è¯·æ±‚** â†’ ä½¿ç”¨æœ¬åœ°æ•°æ®

#### æ–¹æ³• 5: è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
# è¿è¡Œ Supabase åŒæ­¥æµ‹è¯•
npm run test:sync
```

**é¢„æœŸè¾“å‡ºï¼š**
```
ğŸ§ª Supabase æ•°æ®åŒæ­¥æµ‹è¯•

==========================================================
æµ‹è¯• 1: æ£€æŸ¥é…ç½®æ–‡ä»¶
==========================================================

âœ… ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ å­˜åœ¨: .env
âœ… ç¯å¢ƒå˜é‡æ¨¡æ¿æ–‡ä»¶ å­˜åœ¨: .env.example

==========================================================
æµ‹è¯• 2: æ£€æŸ¥ç¯å¢ƒå˜é‡
==========================================================

âœ… Supabase é¡¹ç›® URL å·²é…ç½®: VITE_SUPABASE_URL
  å€¼: https://sbp-a2e2xuudcasoe44t...
âœ… Supabase åŒ¿åå¯†é’¥ å·²é…ç½®: VITE_SUPABASE_ANON_KEY
  å€¼: eyJ0eXAiOiJKV1QiLCJhbGciOiJI...

==========================================================
æµ‹è¯• 3: æµ‹è¯•æ•°æ®åº“è¿æ¥
==========================================================

â„¹ï¸  æ­£åœ¨è¿æ¥åˆ° Supabase...
âœ… æ•°æ®åº“è¿æ¥æˆåŠŸï¼

==========================================================
æµ‹è¯•ç»“æœæ±‡æ€»
==========================================================

âœ… é€šè¿‡ é…ç½®æ–‡ä»¶æ£€æŸ¥ [å…³é”®]
âœ… é€šè¿‡ ç¯å¢ƒå˜é‡æ£€æŸ¥ [å…³é”®]
âœ… é€šè¿‡ æ•°æ®åº“è¿æ¥ [å…³é”®]
âœ… é€šè¿‡ æ•°æ®è¡¨ç»“æ„ [å…³é”®]
âœ… é€šè¿‡ æ•°æ®è¯»å– [å…³é”®]

ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
âœ¨ é¡¹ç›®å·²æ­£ç¡®é…ç½®ï¼Œæœ¬åœ°è°ƒç”¨ä½¿ç”¨ Supabase æ•°æ®
```

---

## ğŸ“ æ€»ç»“

### å…³é”®è¦ç‚¹

1. **âœ… æœ¬åœ°è°ƒç”¨ç¡®å®ä½¿ç”¨ Supabase æ•°æ®**
   - æ‰€æœ‰è¯»å–æ“ä½œä¼˜å…ˆæŸ¥è¯¢ Supabase
   - æ‰€æœ‰å†™å…¥æ“ä½œç›´æ¥å†™å…¥ Supabase
   - æ•°æ®å˜åŒ–å®æ—¶åŒæ­¥åˆ°äº‘ç«¯

2. **âœ… å®Œå–„çš„é™çº§æœºåˆ¶**
   - æœªé…ç½®æ—¶è‡ªåŠ¨ä½¿ç”¨æœ¬åœ°æ•°æ®
   - ä¸ä¼šå´©æºƒæˆ–æŠ¥é”™
   - ç”¨æˆ·ä½“éªŒå¹³æ»‘

3. **âœ… æ¸…æ™°çš„æ•°æ®æµå‘**
   - ç»„ä»¶ â†’ æ•°æ®å±‚ â†’ é…ç½®æ£€æŸ¥ â†’ æœåŠ¡å±‚ â†’ Supabase
   - æ¯ä¸€å±‚èŒè´£æ˜ç¡®
   - æ˜“äºç»´æŠ¤å’Œæ‰©å±•

4. **âš ï¸ éœ€è¦å®Œæˆé…ç½®**
   - åˆ›å»º `.env` æ–‡ä»¶
   - è¿è¡Œæ•°æ®åº“è¿ç§»
   - éªŒè¯è¿æ¥æˆåŠŸ

### å¿«é€ŸéªŒè¯å‘½ä»¤

```bash
# 1. é…ç½®ç¯å¢ƒ
npm run setup

# 2. æµ‹è¯•è¿æ¥
npm run test:sync

# 3. å¯åŠ¨å¼€å‘
npm run dev

# 4. æ‰“å¼€æµè§ˆå™¨
# http://localhost:5173
# æŒ‰ F12 æŸ¥çœ‹æ§åˆ¶å°å’Œç½‘ç»œè¯·æ±‚
```

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0  
**æ›´æ–°æ—¶é—´ï¼š** 2025-10-14
